<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Professional Blog Site | Charles M. Knox</title><meta name=keywords content="portfolio"><meta name=description content="Portfolio item: My former personal blog, written in Angular, Go, and static markdown files. Screenshots below."><meta name=author content="Charles M. Knox"><link rel=canonical href=https://charlesmknox.com/portfolio/fullstack/blog-site/><link href=/assets/css/stylesheet.min.d5ed00cc3354e23e152bb38a498ff671149f8897e79c2d2aa0dcf2d345ca757d.css integrity="sha256-1e0AzDNU4j4VK7OKSY/2cRSfiJfnnC0qoNzy00XKdX0=" rel="preload stylesheet" as=style><link rel=icon href=https://charlesmknox.com/TechLife23_centered-position-14x2_no-bg-shadow.png><link rel=icon type=image/png sizes=16x16 href=https://charlesmknox.com/TechLife23_centered-position-14x2_no-bg-shadow.png><link rel=icon type=image/png sizes=32x32 href=https://charlesmknox.com/TechLife23_centered-position-14x2_no-bg-shadow.png><link rel=apple-touch-icon href=https://charlesmknox.com/TechLife23_centered-position-14x2_no-bg-shadow.png><link rel=mask-icon href=https://charlesmknox.com/TechLife23_centered-position-14x2_no-bg-shadow.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.0"><meta property="og:title" content="Professional Blog Site"><meta property="og:description" content="Portfolio item: My former personal blog, written in Angular, Go, and static markdown files. Screenshots below."><meta property="og:type" content="article"><meta property="og:url" content="https://charlesmknox.com/portfolio/fullstack/blog-site/"><meta property="article:published_time" content="2021-02-28T15:15:50+00:00"><meta property="article:modified_time" content="2021-02-28T15:15:50+00:00"><meta property="og:site_name" content="Charles M. Knox"><meta name=twitter:card content="summary"><meta name=twitter:title content="Professional Blog Site"><meta name=twitter:description content="Portfolio item: My former personal blog, written in Angular, Go, and static markdown files. Screenshots below."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Portfolio","item":"https://charlesmknox.com/portfolio/"},{"@type":"ListItem","position":3,"name":"Professional Blog Site","item":"https://charlesmknox.com/portfolio/fullstack/blog-site/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Professional Blog Site","name":"Professional Blog Site","description":"Before switching to Hugo, I wrote my own full-stack website, and hosted it on AWS. The site was written in:\n Frontend: Angular 9 Middleware/web server: Go 1.13 Data: Static ‚Ä¶","keywords":["portfolio"],"articleBody":"Before switching to Hugo, I wrote my own full-stack website, and hosted it on AWS. The site was written in:\n Frontend: Angular 9 Middleware/web server: Go 1.13 Data: Static markdown files  Screenshots Because the website is not statically generated and requires a live API, and I do not want to continue to provide uptime for the API, I‚Äôll be providing a few screen captures of the site in action.\nFor some of the below screenshots, click on it to view a larger version. Images are compressed significantly in order to avoid any strain on my hosting providers. I would have exported them statically and render them here, but it‚Äôs a messy process and will bloat this site‚Äôs footprint more due to the fact that each static export would have included all of the CSS, webfonts, and images for each screenshot.\nAttributions \nArticles Listing Click the image for a larger version that isn‚Äôt cut off.\n\nAn Article Click the image for a larger version (of a different article, on sleeping) that isn‚Äôt cut off. This one is quite long.\n\nTechnical Discussion The site‚Äôs API layer was written in Go 1.13, was served via Docker and used a no-DB architecture that focused purely on storing files in a ./src directory:\nIt‚Äôs pretty clear that the articles have a specific naming convention. In order to quickly generate an article, I created a bash script called ./gen_article.sh:\n#!/bin/bash -e  pubdate=$(./gen_isodate.js) read -p \"Publication title: \" pubtitle read -p \"Publication category: \" pubcategory echo \"# ${pubtitle}\"  \"./src/${pubdate}___${pubcategory}___${pubtitle}.md\" echo \"Done!\" Note that ./gen_isodate.js does nothing more than this:\n#!/usr/bin/env node console.log(new Date().toISOString()); I probably could have just replaced it with the following Bash command though, instead of bringing Node into the mix - but after a certain point it was just easier to leave it, since Node was already a dependency in this project anyways:\ndate -u +\"%Y-%m-%dT%H:%M:%SZ\"  Side note: Normally I‚Äôm very strict about what dependencies I use. I always opt for the bare minimum of what‚Äôs needed in order to get the job done. This was honestly just me being lazy, which was OK, because it was only me working on this project üòÑ\n Efficiency/Optimizations I didn‚Äôt specifically focus on optimizing the frontend, but I did get to leverage industry-standard optimizations in the middleware layer.\nThe footprint of the site‚Äôs API is as follows:\n Docker image size: 13.4 MB CPU Usage: Runtime memory usage: 6.5MiB, serving 14 documents from memory  The footprint of the frontend is as follows:\n Build time: On a 10th-gen Intel i7, build time (via ng build --prod) is 26306ms Site size: 1.5MB, including all CSS; excludes web fonts and images loaded externally  API Dockerfile The following builder pattern works very well for creating a minimal image and binary (13.4MB mentioned above).\nFROMgolang:alpine AS builderWORKDIR/go/src/currentCOPY go.mod /go/src/currentRUN go mod downloadCOPY . /go/src/currentWORKDIR/go/src/currentRUN go build -vFROMalpine:latestCOPY --from=builder /go/src/current/content /contentCMD [\"/content\"]Source Code I don‚Äôt feel it‚Äôs appropriate to release the source code to the public on this project. I‚Äôm definitely a huge open source software enthusiast and advocate, but in this case, my reasons for not wanting to publish are:\n It‚Äôs very unpolished; there‚Äôs a lot of ‚Äútinker‚Äù code that I ended up just commenting out. It‚Äôs not worth the time to clean it up. All of the code/functionality in the API that actually matters was fed into the Light Sites project, mentioned below. Due to how fast Go and Angular iterate their frameworks, I felt that releasing older, unpolished, random code to the the open source community might do more harm than good - I imagine someone stumbling upon this codebase and naively viewing some of it as ‚Äúbest practice‚Äù.  As with any software project, informal or not, careful decisions need to be made when it comes to deciding when to release.\nHow the API reads \u0026 serves data When designing the API, I wanted to take an approach that might prevent excessive disk reads, in the event that someone nefarious ever tried spamming requests to my API. To handle this, I opted to read every .md file under ./src and load it into memory every 30 minutes. Then, when someone makes a request to my API for the content they asked for, I‚Äôd be serving it from RAM instead of doing any disk IO.\nIf I‚Äôve got 14 files and I read from disk every 30 minutes, you could say that it‚Äôs equivalent to someone hitting the page approximately every 2 minutes, in terms of the number of files read from disk. My blog was never popular enough to justify that, but it seemed like a solid approach to getting the most out of that already-minimalist RAM footprint of about 6.5MiB (mentioned in the efficiency/optimizations section above).\nIn essence, this was a pure-RAM-cache API that served its purpose fairly well. There‚Äôs always room for optimizations and improvements in any software that we write, but this was ‚Äúgood enough‚Äù.\nFor larger-scale websites, the API footprint would have grown, and the average number of disk-reads per minute would go up, but all things considered it‚Äôs still a reasonable approach.\nA better approach would be not to use intervals at all. Instead, do a ‚Äúread-once‚Äù whenever an API request comes in for any article that hasn‚Äôt been retrieved in the last e.g. 2 hours, then cache the contents of that page in memory. Many caching layers in production-grade software do some variant of this.\nDownsides The biggest downside with writing a website with an always-on API is ensuring uptime. Even with Docker‚Äôs --restart unless-stopped option, managing an AWS VM just to keep the API alive isn‚Äôt worth it. For this kind of website, statically generated files are by far better, because I can just generate the files and upload the site to GitHub Pages, AWS S3, etc. and spend zero energy and time managing it beyond that. Reusing other services to save yourself time is almost always the way to go.\nWhere the results of this project went After writing this, I took a lot of the learnings from statically parsing Markdown files, traversing HTML node trees, and API layers to write Light Sites. This was another fun project that was a successor to this API; it was unit tested more comprehensively (95% coverage), has more customizability, and had more focused time investment. Since Light Sites was primarily a portfolio builder project, I plan to do a writeup on it here as well.\nAdditionally, some of the techniques I used and implemented in the Angular frontend have stuck with me for years and have been very useful. Personal projects always yield valuable learning.\nThanks for reading!\n","wordCount":"1124","inLanguage":"en","datePublished":"2021-02-28T15:15:50Z","dateModified":"2021-02-28T15:15:50Z","author":{"@type":"Person","name":"Charles M. Knox"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://charlesmknox.com/portfolio/fullstack/blog-site/"},"publisher":{"@type":"Organization","name":"Charles M. Knox","logo":{"@type":"ImageObject","url":"https://charlesmknox.com/TechLife23_centered-position-14x2_no-bg-shadow.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://charlesmknox.com accesskey=h title="Charles M. Knox (Alt + H)"><img src=/TechLife23_centered-position-14x2_full-bg-shadow.png alt=logo aria-label=logo height=35>Charles M. Knox</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://charlesmknox.com/about title=About><span>About</span></a></li><li><a href=https://charlesmknox.com/categories/portfolio title=Portfolio><span>Portfolio</span></a></li><li><a href=https://charlesmknox.com/supporters title=Supporters><span>Supporters</span></a></li><li><a href=https://charlesmknox.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://charlesmknox.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://charlesmknox.com/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://charlesmknox.com/ title=Home><span>Home</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Professional Blog Site</h1><div class=post-description>Portfolio item: My former personal blog, written in Angular, Go, and static markdown files. Screenshots below.</div><div class=post-meta>February 28, 2021&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;Charles M. Knox</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#screenshots aria-label=Screenshots>Screenshots</a><ul><li><a href=#attributions aria-label=Attributions>Attributions</a></li><li><a href=#articles-listing aria-label="Articles Listing">Articles Listing</a></li><li><a href=#an-article aria-label="An Article">An Article</a></li></ul></li><li><a href=#technical-discussion aria-label="Technical Discussion">Technical Discussion</a><ul><li><a href=#efficiencyoptimizations aria-label=Efficiency/Optimizations>Efficiency/Optimizations</a></li><li><a href=#api-dockerfile aria-label="API Dockerfile">API Dockerfile</a></li><li><a href=#source-code aria-label="Source Code">Source Code</a></li><li><a href=#how-the-api-reads--serves-data aria-label="How the API reads &amp;amp; serves data">How the API reads & serves data</a></li><li><a href=#downsides aria-label=Downsides>Downsides</a></li></ul></li><li><a href=#where-the-results-of-this-project-went aria-label="Where the results of this project went">Where the results of this project went</a></li></ul></div></details></div><div class=post-content><p>Before switching to <a href=https://gohugo.io>Hugo</a>, I wrote my own full-stack website, and hosted it on AWS. The site was written in:</p><ul><li><strong>Frontend</strong>: Angular 9</li><li><strong>Middleware</strong>/web server: Go 1.13</li><li><strong>Data</strong>: Static markdown files</li></ul><h2 id=screenshots>Screenshots<a hidden class=anchor aria-hidden=true href=#screenshots>#</a></h2><p>Because the website is not statically generated and requires a live API, and I do not want to continue to provide uptime for the API, I&rsquo;ll be providing a few screen captures of the site in action.</p><p><strong>For some of the below screenshots, click on it to view a larger version.</strong> Images are compressed significantly in order to avoid any strain on my hosting providers. I would have exported them statically and render them here, but it&rsquo;s a messy process and will bloat this site&rsquo;s footprint more due to the fact that each static export would have included all of the CSS, webfonts, and images <em>for each screenshot</em>.</p><h3 id=attributions>Attributions<a hidden class=anchor aria-hidden=true href=#attributions>#</a></h3><p><a href=images/sc-charlesmknox-blog_attributions_long.jpg><img loading=lazy src=images/sc-charlesmknox-blog_attributions_long.jpg alt="Attributions page screenshot"></a></p><h3 id=articles-listing>Articles Listing<a hidden class=anchor aria-hidden=true href=#articles-listing>#</a></h3><p><em>Click the image for a larger version that isn&rsquo;t cut off.</em></p><p><a href=images/sc-charlesmknox-blog_all-articles_long.jpg><img loading=lazy src=images/sc-charlesmknox-blog_all-articles_short.jpg alt="Articles listing screenshot, cut off at the bottom"></a></p><h3 id=an-article>An Article<a hidden class=anchor aria-hidden=true href=#an-article>#</a></h3><p><em>Click the image for a larger version (of a different article, on sleeping) that isn&rsquo;t cut off. This one is quite long.</em></p><p><a href=images/sc-charlesmknox-blog_napping-article_long.jpg><img loading=lazy src=images/sc-charlesmknox-blog_sleeping-article_short.jpg alt="Sleeping article screenshot, cut off at the bottom. Click to see a long screenshot of an article about napping."></a></p><h2 id=technical-discussion>Technical Discussion<a hidden class=anchor aria-hidden=true href=#technical-discussion>#</a></h2><p>The site&rsquo;s API layer was written in <a href=https://golang.org>Go 1.13</a>, was served via <a href=https://docker.com>Docker</a> and used a no-DB architecture that focused purely on storing files in a <code>./src</code> directory:</p><p><img loading=lazy src=images/api_directory_layout.jpg alt="API root repository directory containing source markdown files and build files"></p><p>It&rsquo;s pretty clear that the articles have a specific naming convention. In order to quickly generate an article, I created a bash script called <code>./gen_article.sh</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e>#!/bin/bash -e
</span><span style=color:#75715e></span>
pubdate<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>./gen_isodate.js<span style=color:#66d9ef>)</span>

read -p <span style=color:#e6db74>&#34;Publication title: &#34;</span> pubtitle
read -p <span style=color:#e6db74>&#34;Publication category: &#34;</span> pubcategory

echo <span style=color:#e6db74>&#34;# </span><span style=color:#e6db74>${</span>pubtitle<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> &gt; <span style=color:#e6db74>&#34;./src/</span><span style=color:#e6db74>${</span>pubdate<span style=color:#e6db74>}</span><span style=color:#e6db74>___</span><span style=color:#e6db74>${</span>pubcategory<span style=color:#e6db74>}</span><span style=color:#e6db74>___</span><span style=color:#e6db74>${</span>pubtitle<span style=color:#e6db74>}</span><span style=color:#e6db74>.md&#34;</span>

echo <span style=color:#e6db74>&#34;Done!&#34;</span>
</code></pre></div><p>Note that <code>./gen_isodate.js</code> does nothing more than this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e>#!/usr/bin/env node
</span><span style=color:#75715e></span>console.log<span style=color:#f92672>(</span>new Date<span style=color:#f92672>()</span>.toISOString<span style=color:#f92672>())</span>;
</code></pre></div><p>I probably could have just replaced it with the following Bash command though, instead of bringing Node into the mix - but after a certain point it was just easier to leave it, since Node was already a dependency in this project anyways:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>date -u +<span style=color:#e6db74>&#34;%Y-%m-%dT%H:%M:%SZ&#34;</span>
</code></pre></div><blockquote><p>Side note: Normally I&rsquo;m very strict about what dependencies I use. I always opt for the bare minimum of what&rsquo;s needed in order to get the job done. This was honestly just me being lazy, which was OK, because it was only me working on this project üòÑ</p></blockquote><h3 id=efficiencyoptimizations>Efficiency/Optimizations<a hidden class=anchor aria-hidden=true href=#efficiencyoptimizations>#</a></h3><p>I didn&rsquo;t specifically focus on optimizing the frontend, but I did get to leverage industry-standard optimizations in the middleware layer.</p><p>The footprint of the site&rsquo;s API is as follows:</p><ul><li><strong>Docker image size</strong>: 13.4 MB</li><li><strong>CPU Usage</strong>: &lt;1% normally, with un-noticeable CPU consumption when reading from disk (no time to run more detailed benchmarks; not really worth it)</li><li><strong>Runtime memory usage</strong>: 6.5MiB, serving 14 documents from memory</li></ul><p>The footprint of the frontend is as follows:</p><ul><li><strong>Build time</strong>: On a 10th-gen Intel i7, build time (via <code>ng build --prod</code>) is 26306ms</li><li><strong>Site size</strong>: 1.5MB, including all CSS; excludes web fonts and images loaded externally</li></ul><h3 id=api-dockerfile>API Dockerfile<a hidden class=anchor aria-hidden=true href=#api-dockerfile>#</a></h3><p>The following builder pattern works very well for creating a minimal image and binary (13.4MB mentioned above).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Dockerfile data-lang=Dockerfile><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> golang:alpine AS builder</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /go/src/current</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> go.mod /go/src/current<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> go mod download<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> . /go/src/current<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>WORKDIR</span><span style=color:#e6db74> /go/src/current</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>RUN</span> go build -v<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>FROM</span><span style=color:#e6db74> alpine:latest</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>COPY</span> --from<span style=color:#f92672>=</span>builder /go/src/current/content /content<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>CMD</span> [<span style=color:#e6db74>&#34;/content&#34;</span>]<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><h3 id=source-code>Source Code<a hidden class=anchor aria-hidden=true href=#source-code>#</a></h3><p>I don&rsquo;t feel it&rsquo;s appropriate to release the source code to the public on this project. I&rsquo;m definitely a huge open source software enthusiast and advocate, but in this case, my reasons for not wanting to publish are:</p><ul><li>It&rsquo;s very unpolished; there&rsquo;s a lot of &ldquo;tinker&rdquo; code that I ended up just commenting out. It&rsquo;s not worth the time to clean it up.</li><li>All of the code/functionality in the API that actually matters was fed into the <a href=https://gitlab.com/light-sites/light-sites>Light Sites</a> project, mentioned below.</li><li>Due to how fast Go and Angular iterate their frameworks, I felt that releasing older, unpolished, random code to the the open source community might do more harm than good - I imagine someone stumbling upon this codebase and naively viewing some of it as &ldquo;best practice&rdquo;.</li></ul><p>As with any software project, informal or not, careful decisions need to be made when it comes to deciding when to release.</p><h3 id=how-the-api-reads--serves-data>How the API reads & serves data<a hidden class=anchor aria-hidden=true href=#how-the-api-reads--serves-data>#</a></h3><p>When designing the API, I wanted to take an approach that might prevent excessive disk reads, in the event that someone nefarious ever tried spamming requests to my API. To handle this, I opted to read every <code>.md</code> file under <code>./src</code> and load it into memory every 30 minutes. Then, when someone makes a request to my API for the content they asked for, I&rsquo;d be serving it from RAM instead of doing any disk IO.</p><p>If I&rsquo;ve got 14 files and I read from disk every 30 minutes, you could say that it&rsquo;s equivalent to someone hitting the page approximately every 2 minutes, in terms of the number of files read from disk. My blog was never popular enough to justify that, but it seemed like a solid approach to getting the most out of that already-minimalist RAM footprint of about 6.5MiB (mentioned in the <a href=#efficiencyoptimizations>efficiency/optimizations</a> section above).</p><p>In essence, this was a pure-RAM-cache API that served its purpose fairly well. There&rsquo;s always room for optimizations and improvements in any software that we write, but this was &ldquo;good enough&rdquo;.</p><p>For larger-scale websites, the API footprint would have grown, and the average number of disk-reads per minute would go up, but all things considered it&rsquo;s still a reasonable approach.</p><p>A better approach would be not to use intervals at all. Instead, do a &ldquo;read-once&rdquo; whenever an API request comes in for any article that hasn&rsquo;t been retrieved in the last e.g. 2 hours, then cache the contents of that page in memory. Many caching layers in production-grade software do some variant of this.</p><h3 id=downsides>Downsides<a hidden class=anchor aria-hidden=true href=#downsides>#</a></h3><p>The biggest downside with writing a website with an always-on API is ensuring uptime. Even with Docker&rsquo;s <code>--restart unless-stopped</code> option, managing an AWS VM just to keep the API alive isn&rsquo;t worth it. For this kind of website, statically generated files are by far better, because I can just generate the files and upload the site to GitHub Pages, AWS S3, etc. and spend zero energy and time managing it beyond that. Reusing other services to save yourself time is almost always the way to go.</p><h2 id=where-the-results-of-this-project-went>Where the results of this project went<a hidden class=anchor aria-hidden=true href=#where-the-results-of-this-project-went>#</a></h2><p>After writing this, I took a lot of the learnings from statically parsing Markdown files, traversing HTML node trees, and API layers to write <a href=https://gitlab.com/light-sites/light-sites>Light Sites</a>. This was another fun project that was a successor to this API; it was unit tested more comprehensively (>95% coverage), has more customizability, and had more focused time investment. Since <a href=https://gitlab.com/light-sites/light-sites>Light Sites</a> was primarily a portfolio builder project, I plan to do a writeup on it here as well.</p><p>Additionally, some of the techniques I used and implemented in the Angular frontend have stuck with me for years and have been very useful. Personal projects always yield valuable learning.</p><p>Thanks for reading!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://charlesmknox.com/tags/portfolio/>portfolio</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Professional Blog Site on twitter" href="https://twitter.com/intent/tweet/?text=Professional%20Blog%20Site&url=https%3a%2f%2fcharlesmknox.com%2fportfolio%2ffullstack%2fblog-site%2f&hashtags=portfolio"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Professional Blog Site on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcharlesmknox.com%2fportfolio%2ffullstack%2fblog-site%2f&title=Professional%20Blog%20Site&summary=Professional%20Blog%20Site&source=https%3a%2f%2fcharlesmknox.com%2fportfolio%2ffullstack%2fblog-site%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Professional Blog Site on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fcharlesmknox.com%2fportfolio%2ffullstack%2fblog-site%2f&title=Professional%20Blog%20Site"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Professional Blog Site on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcharlesmknox.com%2fportfolio%2ffullstack%2fblog-site%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Professional Blog Site on whatsapp" href="https://api.whatsapp.com/send?text=Professional%20Blog%20Site%20-%20https%3a%2f%2fcharlesmknox.com%2fportfolio%2ffullstack%2fblog-site%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Professional Blog Site on telegram" href="https://telegram.me/share/url?text=Professional%20Blog%20Site&url=https%3a%2f%2fcharlesmknox.com%2fportfolio%2ffullstack%2fblog-site%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://charlesmknox.com>Charles M. Knox</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>